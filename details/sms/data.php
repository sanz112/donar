
<!doctype html>
<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">

    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="theme-color" content="#0C359D ">
    <title>ICONSMS Data</title>
    <link rel="apple-touch-icon" sizes="180x180" href="../../static/img/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="../../static/img/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="../../static/img/favicon-16x16.png">
    <link rel="manifest" href="../../static/img/site.webmanifest">

    <meta name="msapplication-TileColor" content="#0C359D ">
    <meta name="msapplication-TileImage" content="../../static/img/bg.jpg">
    <meta itemprop="name" content=".ICONSMS- Buy Airtime and Data for all Network. Make payment for DSTV, GOTV, PHCN other services">
    <meta itemprop="description" content="Buy Cheap Internet Data Plan and Airtime Recharge for Airtel, 9mobile, GLO, MTN, Pay DSTV, GOTV, PHCN.">
    <meta itemprop="image" content="../../static/img/bg.jpg">
     <link rel="stylesheet" href="../../static/ogbam/w3.css">

     <!-- Twitter Card data -->
     <meta name="twitter:card" content="../../static/img/bg.jpg">
     <meta name="twitter:title" content=".ICONSMS- Buy Airtime and Data for all Network. Make payment for DSTV, GOTV, PHCN other services">
     <meta name="twitter:description" content="Buy Cheap Internet Data Plan and Airtime Recharge for Airtel, 9mobile, GLO, MTN, Pay DSTV, GOTV, PHCN.">
     <meta name="twitter:image:src" content="../../static/img/bg.jpg">

     <!-- Open Graph data -->
     <meta property="og:locale" content="en_US">
     <meta property="og:title" content=".ICONSMS- Buy Airtime and Data for all Network. Make payment for DSTV, GOTV, PHCN other services">
     <meta property="og:image" content="../../static/img/bg.jpg">
     <meta property="og:description" content="Buy Cheap Internet Data Plan and Airtime Recharge for Airtel, 9mobile, GLO, MTN, Pay DSTV, GOTV, PHCN."/>
     <meta property="og:site_name" content=".ICONSMS"/>
     <meta property="og:url" content="https://www..ICONSMS.com.ng">
     <meta property="og:type" content="website">
     <!-- Script js -->
      <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="../../static/assets/vendor/bootstrap/css/bootstrap.min.css">
    <link href="../../static/assets/vendor/fonts/circular-std/style.css" rel="stylesheet">
    <link rel="stylesheet" href="../../static/assets/libs/css/style.css">
    <link rel="stylesheet" href="../../static/assets/vendor/fonts/fontawesome/css/fontawesome-all.css">
    <link rel="stylesheet" href="../../static/assets/vendor/charts/chartist-bundle/chartist.css">
    <link rel="stylesheet" href="../../static/assets/vendor/charts/morris-bundle/morris.css">
    <link rel="stylesheet" href="../../static/assets/vendor/fonts/material-design-iconic-font/css/materialdesignicons.min.css">
    <link rel="stylesheet" href="../../static/assets/vendor/charts/c3charts/c3.css">
    <link rel="stylesheet" href="../../static/assets/vendor/fonts/flag-icon-css/flag-icon.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="../../static/ogbam/form.css">
</head>

<body onload="alertinfo()">
    <!-- ============================================================== -->
    <!-- main wrapper -->
    <!-- ============================================================== -->
    <div  class="dashboard-main-wrapper">

    
       
       
        <div class="dashboard-header">
            <nav class="navbar navbar-expand-lg fixed-top">
                <a class="navbar-brand" href="../../" style="color: whitesmoke;">ICONSMS</a>
                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>


                <div class="collapse navbar-collapse " id="navbarSupportedContent">
                    <ul class="navbar-nav ml-auto navbar-right-top">




                        <li class="nav-item dropdown nav-user">
                            <a class="nav-link nav-user-img" href="#" id="navbarDropdownMenuLink2" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><img src="../../static/assets/images/avatar-1.jpg" alt="" class="user-avatar-md rounded-circle"></a>
                            <div class="dropdown-menu dropdown-menu-right nav-user-dropdown" aria-labelledby="navbarDropdownMenuLink2">
                                <div class="nav-user-info">
                                    <h5 class="mb-0 text-white nav-user-name"></h5>
                                    <span class="status"></span><span class="ml-2">Wallet:  &#8358; 1,780.00</span>
                                </div>
                                <a class="dropdown-item" href="../my_account.php"><i class="fas fa-user mr-2"></i>Account</a>
                                <a class="dropdown-item"  href="../settings.php"><i class="fas fa-cog mr-2"></i>Setting</a>
                                                                <a class="dropdown-item" id="logouttnew" href="../logout.php"><i class="fas fa-power-off mr-2"></i>Logout</a>
                                                            </div>
                        </li>
                    </ul>
                </div>
            </nav>
        </div>
     
        <!-- ============================================================== -->
        <!-- end navbar -->
        <!-- ============================================================== -->
        <!-- ============================================================== -->
        <!-- left sidebar -->
        <!-- ============================================================== -->
        <div class="nav-left-sidebar sidebar-dark">
            <div class="menu-list">
                <nav class="navbar navbar-expand-lg navbar-light">
                    <a class="d-xl-none d-lg-none" href="#">Dashboard</a>
                    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>

                    <div class="collapse navbar-collapse" id="navbarNav">
                        <ul class="navbar-nav flex-column">
                                <li class="nav-divider">
                                    Menu
                                </li>

                                <li class="nav-item ">
                                    <a class="nav-link active" href="dashboard.php"><i class="fa fa-fw fa-user-circle"></i>Dashboard</a>
                                </li>

                                <li class="nav-item">
                                    <a class="nav-link" href="data.php"><i class="fa fa-fw fa-rocket"></i>Buy Data</a>
                                </li>

                                <li class="nav-item">
                                    <a class="nav-link" href="airtime.php"><i class="mdi mdi-phone-log"></i>Buy Airtime</a>
                                </li>


                                <li class="nav-item ">
                                    <a class="nav-link" href="#" data-toggle="collapse" aria-expanded="false" data-target="#submenu-4" aria-controls="submenu-4"><i class="fa fa-cart-plus icon-wrap"></i>Utilities Payment</a>
                                    <div id="submenu-4" class="collapse submenu">
                                        <ul class="nav flex-column">
                                            <li class="nav-item">
                                                <a class="nav-link" href="utility.php"><i class="fa fa-light-bulb"></i>Electric Payment</a>
                                            </li>
                                            <li class="nav-item">
                                                <a class="nav-link" href="cable.php"><i class="mdi mdi-television"></i>Cable Subscription</a>
                                            </li>


                                        </ul>
                                    </div>
                                </li>


                                <li class="nav-item ">
                                    <a class="nav-link" href="#" data-toggle="collapse" aria-expanded="false" data-target="#submenu-5" aria-controls="submenu-4"><i class="fa fa-cart-plus icon-wrap"></i>Fund Wallet</a>
                                    <div id="submenu-5" class="collapse submenu">
                                        <ul class="nav flex-column">
                                            <li class="nav-item">
                                                <a class="nav-link" href="fundAccount.php">Fund with payment gateway (ATM)</a>
                                            </li>
                                              <li class="nav-item">
                                                <a class="nav-link" href="autobank.php">Automated Bank Transfer (N20 charge)</a>
                                            </li>
                                            <li class="nav-item">
                                                <a class="nav-link" href="coupon.php">Fund with coupon</a>
                                            </li>
                                            <li class="nav-item">
                                                <a class="nav-link" href="airtime_cash.php">Fund with airtime transfer (Airime 2 cash)</a>
                                            </li>


                                        </ul>
                                    </div>
                                </li>



                                <!-- <li class="nav-item">
                                    <a class="nav-link" href="../TransferCreate/index.html"><i class="fas fa-paper-plane"></i> Transfer to other users </a>
                                </li> -->

                                 <li class="nav-item">
                                    <a class="nav-link" href="../my_account.php"><i class="fas fa-user"></i> Account</a>
                                </li>

                                 <li class="nav-item">
                                    <a class="nav-link"  href="../settings.php"><i class="fas fa-cog"></i> Setting </a>
                                </li>
                                                             <li class="nav-item">
                                    <a class="nav-link" id="logoutt" href="../logout.php"><i  class="fas fa-arrow-left"></i> Logout </a>
                                </li>
                                                                                                                                   <li class="nav-item">
                                    <a class="nav-link" href="../../admin/database.php"><i class="fas fa-user"></i> Admin </a>
                                </li>
                                                                                                


                            </ul>
                    </div>
                </nav>
                 
            </div>
        </div>
        
        
          <script>

            document.getElementById("logoutt").addEventListener("click", function() {
               // alert("hello");
                localStorage.removeItem("2");
            
            });
            
          
        </script>
        <div class="dashboard-wrapper">
            <div class="dashboard-ecommerce">
                <div class="container-fluid dashboard-content ">


                   
<!-- Latest compiled and minified CSS -->



<style>

    #process{
        display: none;
    }

    
     /*--thank you pop starts here--*/
     .thank-you-pop{
      width:100%;
       padding:20px;
      text-align:center;
    }
    .thank-you-pop img{
      width:76px;
      height:auto;
      margin:0 auto;
      display:block;
      margin-bottom:25px;
    }
    
    .thank-you-pop h1{
      font-size: 42px;
        margin-bottom: 25px;
      color:#5C5C5C;
    }
    .thank-you-pop p{
      font-size: 20px;
        margin-bottom: 27px;
       color:#5C5C5C;
    }
    .thank-you-pop h3.cupon-pop{
      font-size: 25px;
        margin-bottom: 40px;
      color:#222;
      display:inline-block;
      text-align:center;
      padding:10px 20px;
      border:2px dashed #222;
      clear:both;
      font-weight:normal;
    }
    .thank-you-pop h3.cupon-pop span{
      color:#03A9F4;
    }
    .thank-you-pop a{
      display: inline-block;
        margin: 0 auto;
        padding: 9px 20px;
        color: #fff;
        text-transform: uppercase;
        font-size: 14px;
        background-color: #8BC34A;
        border-radius: 17px;
    }
    .thank-you-pop a i{
      margin-right:5px;
      color:#fff;
    }
    #ignismyModal .modal-header{
        border:0px;
    }
    /*--thank you pop ends here--*/
    
</style>
<script>
     $(document).ready(function() {
        $("input#request_id").val(Math.floor((Math.random() * 1000000000000) + 1));
      });
</script>
    <h2 class="w3-center">Buy Data Plan</h2>

    <div class="box w3-card-4">

         
 
        <form method="post" id='paymentForm' data-plans-url="/ajax/load_plans/" novalidate>


            <div class="row">

                <div class="col-sm-8">
 <input type="hidden" id="request_id" name="request_id" class="form-control" placeholder="Reference Identification" required  disabled>
         <input type="hidden" id="email" name="email" class="form-control" placeholder="Email Address" required>
   <input type="hidden" id="client_id" name="client_id" class="form-control" value="1" disabled placeholder="Client Id" aria-describedby="client_id">
    <input type="hidden" id="swiftType" name="swiftType" class="form-control" value="Data" required disabled aria-describedby="swiftType">
 <input type="hidden" name="csrf-token" id="csrf-token" value="7925c517740fae4b170dfb4e48fc7bb0"> 
     

<label class="w3-text-blue">
 <!--   
 -->
</label>

<div class=""><b>


    
    <div id="div_id_network" class="form-group">
        
            <label for="id_network" class=" requiredField">
                Network<span class="asteriskField">*</span>
            </label>
        

        

        

        
            
                <div class="">
                    <select name="network" class="select form-control" required id="id_network">
  <option value="-1" selected="selected">Select a Network Provider</option>


  <option value="1">MTN NG</option>

  <option value="2">GLO NG</option>
  <option value="4">AIRTEL NG</option>
  <option value="3">9MOBILE NG</option>
  
  

</select>
                    


    




    



                </div>
            
        
    </div>
    

</b></div>




<label class="w3-text-blue">
 <!--   
 -->
</label>

<div class=""><b>


    
    <div id="div_id_mobile_number" class="form-group">
        
            <label for="id_mobile_number" class=" requiredField">
                Mobile number<span class="asteriskField">*</span>
            </label>
        

        

        

        
            
                <div class="">
                    <input type="text" name="mobile_number" maxlength="11" minlength="11" class="textinput textInput form-control" required id="id_mobile_number">
                    


    




    



                </div>
            
        
    </div>
    

</b></div>


<label class="w3-text-blue">
 <!--   
 -->
</label>


<div class=""><b>


    
    <div id="div_id_wallet" class="form-group">
        
            <label for="wallet" class=" requiredField">
                Amount<span class="asteriskField">*</span>
            </label>
        

        

        

        
            
                <div class="">
                    <input type="number" name="amount" min="100" class="numberinput form-control" id="wallet"  required>
                    


    




    



                </div>
            
        
    </div>
    

</b></div>


<label class="w3-text-blue">
 <!--   
 -->
</label>

<div class=""><b>


    
    <div id="div_id_plan" class="form-group">
        
            <label for="id_plan" class=" requiredField">
                Plan<span class="asteriskField">*</span>
            </label>
        

        

        

        
            
                <div class="">
      <select name="plan" class="select form-control" required id="id_plan">
  <option value="-1">Select Subscription Plan</option>

</select>
                    


    




    



                </div>
            
        
    </div>
    

</b></div>




<label class="w3-text-blue">
 <!--   
 -->
</label>

<div class=""><b>


    
        <div class="form-group">
        
    
    <div id="div_id_Ported_number" class="form-check">
        

        

        

        
            
                
                    <input type="checkbox" name="Ported_number" class="checkboxinput form-check-input" id="id_Ported_number">
                
                <label for="id_Ported_number" class="form-check-label">
                    Bypass number validator for ported number  .
                </label>
                


    




    



            
        
    </div>
    
        
        </div>
    

</b></div>

<div class=""><b>

    <div id="div_id_platforms" class="form-group">
        
            <label for="id_platforms" class=" requiredField">
                Pay With[Card/Wallet]<span class="asteriskField">*</span>
            </label>
        

        

        

        
            
                <div class="">
                    <select name="platforms" class="form-control" required id="platforms">

 <option disabled value="Card">Card</option>
<option selected value="Wallet">Wallet</option>
 
</select>


                </div>
            
        
    </div>
    
</b></div>
     





                    <button type="button" class=" btn" style='margin-bottom: 40px; background:green; color: white;' id ="process" disabled="true" > <i class="fa fa-circle-o-notch fa-spin " style="font-size: 30px; animation-duration: 2s;"></i> Please wait </button>
                  
                     <input type="submit" value="Buy Now" class=" btn" style='margin-bottom: 40px; background:green; color: white;' id ="datasubmit" name="datasubmit">


                </div>
                </form>
                <div class="col-sm-4">
                     <h4 class="text-center">Codes for Data Balance: </h4> 
                    <ul class="list-group"> 
                       <li class="list-group-item list-group-item-warning">MTN [SME] *461*4#  </li>
                       <li class="list-group-item list-group-item-warning">MTN [Gifting] *131*4#  </li>
                              <li class="list-group-item list-group-item-dark"> 9mobile [Gifting]   *228# </li>
                        <li class="list-group-item list-group-item-danger"> Airtel   *140# </li>
                        <li class="list-group-item list-group-item-success"> Glo  *127*0#. </li>
                        </ul>


                    

            </div>






    </div>
</div>
</div>



<div class="modal fade" id="successModal" tabindex="-1" role="dialog" aria-labelledby="successModalTitle" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
      <div class="modal-content">
        <div class="modal-header">
            <h5 class="modal-title" id="successModalCenterTitle">Order Submited succesfully</h5>
           
          </div>
        <div class="modal-body">
        
<table class='table table-all'>
    <tr>

        <td><b>ID</b></td>
        <td id="ref"></td>
    </tr>

    <!--<tr>-->

    <!--    <td><b>Previous Balance</b></td>-->
    <!--    <td><span></span>₦<span id="before"></span></td>-->
    <!--</tr>-->

    <!--<tr>-->
          <td><b> Balance Before</b></td>
        <td> <span></span>₦<span id="neww">1780</span></td>
    </tr>
    <!--<tr>-->

    <!--    <td><b>Amount</b></td>-->
    <!--    <td id="amt"></td>-->
    <!--</tr>-->


    <tr>

        <td><b>Plan size </b></td>
        <td id="plan"></td>
    </tr>

    <tr>

        <td><b>Mobile Number</b></td>
        <td id="num"> </td>
    </tr>

    <tr>

        <td><b>Network</b></td>
        <td id ="net"></td>
    </tr>

    <tr>

        <td><b>Status</b></td>
        <td id ="status"></td>
    </tr>

</table>

        </div>
     
        <div class="modal-footer">
            <a href = "dashboard.php?Data-plan-Recharged-successfully" style="background: green;" class="btn btn-secondary" >OK</a>
           
          </div>
      </div>
    </div>
  </div>

<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalTitle" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
      <div class="modal-content">
      
        <div class="modal-body">
            <div class="thank-you-pop">
              <img src="../../static/img/stop.png" height="100px" width="100px">
              <p id ="errmessage" style="font-size: 20px;">You cannot Purchase this Plan because the Owner of this site needs to fund his/her Account. Thank You!</p>
              <button type="button" style="background: green;" class="btn btn-primary" data-dismiss="modal">OK</button>
      
             </div>
          </div>
     
      </div>
    </div>
  </div>


<script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
<script>
 
 
 
 var optionVarsw = [
  {"response_description":"1","content":{"ServiceName":"MTN Data","sim":"1","serviceID":"mtn-data","convinience_fee":"0 %","varations":[
    {"variation_code":"mtn-500mb-115", "var_cod" :"92", "name":"N115(GIFTING) - 500MB - 30 days","variation_amount":"115","fixedPrice":"Yes"}, {"variation_code":"mtn-1gb-220", "var_cod" :"93", "name":"N220(GIFTING) - 1GB - 30 days","variation_amount":"220","fixedPrice":"Yes"}, 
    {"variation_code":"mtn-2gb-440", "var_cod" :"94", "name":"N440(GIFTING) - 2GB - 30 days","variation_amount":"440","fixedPrice":"Yes"},
   {"variation_code":"mtn-3gb-660", "var_cod" :"95", "name":"N660(GIFTING) - 3GB - 30 days","variation_amount":"660","fixedPrice":"Yes"},
   {"variation_code":"mtn-5gb-1100", "var_cod" :"97", "name":"N1100(GIFTING) - 5GB - 30 days","variation_amount":"1100","fixedPrice":"Yes"},
  {"variation_code":"mtn-10gb-2200", "var_cod" :"102", "name":"N2200(GIFTING) - 10GB - 30 days","variation_amount":"2200","fixedPrice":"Yes"},
 {"variation_code":"mtn-500mb-130", "var_cod" :"6", "name":"N130(SME) - 500MB - 30 days","variation_amount":"130","fixedPrice":"Yes"},
{"variation_code":"mtn-1gb-250", "var_cod" :"7", "name":"N250(SME) - 1GB - 30 days","variation_amount":"250","fixedPrice":"Yes"},
{"variation_code":"mtn-2gb-500", "var_cod" :"8", "name": "N500(SME) - 2GB - 30 days", "variation_amount":"500","fixedPrice":"Yes"},
{"variation_code":"mtn-3gb-750", "var_cod" :"11", "name":"N750(SME) - 3GB - 30 days","variation_amount":"750","fixedPrice":"Yes"},
{"variation_code":"mtn-5gb-1250", "var_cod" :"56", "name":"N1250(SME) - 5GB - 30 days","variation_amount":"1250","fixedPrice":"Yes"},
  {"variation_code":"mtn-10gb-2500", "var_cod" :"117", "name":"N2500(SME) - 10GB - 30 days","variation_amount":"2500","fixedPrice":"Yes"}]}},



{"response_description":"2","content":{"ServiceName":"GLO Data","sim":"2", "serviceID":"glo-data","convinience_fee":"0 %","varations":[{"variation_code":"glo450", "var_cod" : "37", "name":"N450 - 1GB Gifting - 14 Days","variation_amount":"450", "fixedPrice":"Yes"}, {"variation_code":"glo880", "var_cod" : "32","name":"N880 - 2.3GB Gifting - 30 days","variation_amount":"880","fixedPrice":"Yes"},{"variation_code":"glo1305", "var_cod" : "26","name":"N1305 - 3.75GB Gifting - 30 days","variation_amount":"1305","fixedPrice":"Yes"},{"variation_code":"glo1750", "var_cod" :"27","name":"N1750 - 5.25GB Gifting - 30 days","variation_amount":"1750","fixedPrice":"Yes"},{"variation_code":"glo2165", "var_cod" :"28","name":"N2165 - 7.0GB Gifting - 30 days","variation_amount":"2165","fixedPrice":"Yes"},{"variation_code":"glo2590", "var_cod" :"29","name":"N2590 - 9.0GB Gifting - 30 days","variation_amount":"2590","fixedPrice":"Yes"},{"variation_code":"glo3450", "var_cod" :"110","name":"N3450 - 12.0GB Gifting - 30 days","variation_amount":"3450","fixedPrice":"Yes"}
// {"variation_code":"glo2760", "var_cod" : "29","name":"N2750 - 9GB - 30 days","variation_amount":"2760","fixedPrice":"Yes"}, {"variation_code":"glo2760", "var_cod" : "110","name":"N3750 - 12GB - 30 days","variation_amount":"3660","fixedPrice":"Yes"},
//  {"variation_code":"glo4580", "var_cod" : "111","name":"N4600 - 16.5GB - 30 days","variation_amount":"4580","fixedPrice":"Yes"}
]}},



  {"response_description":"3","content":{"ServiceName":"9mobile Data","sim":"3", "serviceID":"etisalat-data","convinience_fee":"0 %","varations":[
     {"variation_code":"eti-450","var_cod" : "54","name":"N450 - 500MB Gifting - 30 Days","variation_amount":"450","fixedPrice":"Yes"},
  {"variation_code":"eti-880","var_cod" : "13","name":"N880 - 1.5GB Gifting - 30 Days","variation_amount":"880","fixedPrice":"Yes"},
{"variation_code":"eti-1038","var_cod" : "14","name":"N1038 - 2GB Gifting - 30 Days","variation_amount":"1038","fixedPrice":"Yes"},
{"variation_code":"eti-1300", "var_cod" : "15","name":"N1300 - 3GB Gifting - 30 Days","variation_amount":"1300","fixedPrice":"Yes"},{"variation_code":"eti-1720","var_cod" : "33","name":"N1720 - 4.5GB Gifting - 30 Days","variation_amount":"1720","fixedPrice":"Yes"},{"variation_code":"eti-3400","var_cod" : "36","name":"N3400 - 11GB Gifting - 30 Days","variation_amount":"3400","fixedPrice":"Yes"}
]}},

{"response_description":"4","content":{"ServiceName":"Airtel Data","sim":"4","serviceID":"airtel-data","convinience_fee":"0 %","varations":[{"variation_code":"airt-485", "var_cod" :"40", "name":"N485 - 750MB Gifting - 14 Days","variation_amount":"485","fixedPrice":"Yes"},{"variation_code":"airt-970", "var_cod" :"18", "name":"N970 - 1.5GB Gifting - 30 Days","variation_amount":"970","fixedPrice":"Yes"},{"variation_code":"airt-1170", "var_cod" :"46", "name":"N1170 - 2GB Gifting - 30 Days","variation_amount":"1170","fixedPrice":"Yes"},{"variation_code":"airt-1450", "var_cod" :"45", "name":"N1450 - 3GB Gifting - 30 Days","variation_amount":"1450","fixedPrice":"Yes"},{"variation_code":"airt-1930", "var_cod" :"19", "name":"N1930  - 4.5GB Gifting - 30 Days","variation_amount":"1930","fixedPrice":"Yes"},
{"variation_code":"airt-2410", "var_cod" :"23", "name":"N2410 - 6GB Gifting - 30 Days","variation_amount":"2410","fixedPrice":"Yes"},{"variation_code":"airt-3830", "var_cod" :"24", "name":"N3830 - 11GB Gifting - 30 Days","variation_amount":"3830","fixedPrice":"Yes"
}]}}];

 
 $(document).ready(function(){
         $("select#id_plan").on("change", function() {
    function myTrim(x) {
      return x.replace(/^\s+|\s+$/gm,'');
    }
    var str = $("select#id_plan option:selected").text();
    $("input#wallet").val(parseFloat(myTrim(str.substr(1, 4))));
    $("input#wallet").attr("value", parseFloat(myTrim(str.substr(1, 4))));
        
        });
     
              
              
           
    $('select#id_network').on('change', function(e){
        //alert('hello');
        
  $("input#wallet").html('');
  $("input#wallet").val('');
   $("input#wallet").attr('disabled', 'disabled');
//   $("input#serviceIDw").attr('disabled','disabled')
   $("input#email").attr('disabled', 'disabled').val('wittstack@gmail.com');
//   $("input#varr").attr('disabled', 'disabled');
    $(this).find("select#id_network option[value='0']").remove();

        var idwxy = $("select#id_network option:selected").val();
        $('select#id_plan').html('');
        $('select#id_plan').text(''); 
    //   $('select#varr').html('');  
    //     $('select#varr').text('');       
         for(var i = 0; i < optionVarsw.length; i++) {
            var codew = optionVarsw[i].response_description;	                     
              if(codew == idwxy) {
               // $("select#sim option").removeAttr("class");
            
               $.each(optionVarsw[i].content.varations, function (i,sectionObj) {
                  //  $("select#sim option:selected").addClass("servicessw");
                $("input#wallet").val("The Amount is set Default Amount");
            
               $('select#id_plan').append('<option value='+sectionObj.var_cod+'>'+sectionObj.name+'</option>');   
//              
                 
                // $("input#varrnew").attr("value", $("select#servicesw option:selected").val()); 
                function myTrim(x) {
                  return x.replace(/^\s+|\s+$/gm,'');
                }
                var str = $("select#id_plan option:selected").text();
                $("input#wallet").val(parseFloat(myTrim(str.substr(1, 4))));
                $("input#wallet").attr("value", parseFloat(myTrim(str.substr(1, 4))));
                  });

                            
            }
         }
          e.preventDefault();
    });   

//     $('select#id_network').on('change', function(e){
//   $("input#wallet").html('');
//   $("input#wallet").val('');
//   $("input#wallet").attr('disabled', 'disabled');
//   $("input#email").attr('disabled', 'disabled').val('');
// //   $("input#varr").attr('disabled', 'disabled');
//     $(this).find("select#id_plan option[value='0']").remove();

//         var idwxy = $("select#id_network option:selected").val();
          
//          for(var i = 0; i < optionVarsw.length; i++) {
             
//             var codew = optionVarsw[i].response_description;	                     
//               if(codew == idwxy) {
//               // $("select#id_network option").removeAttr("class");
            
//               $.each(optionVarsw[i].content.varations, function (i,sectionObj) {
//         // $("select#id_network option:selected").addClass("services");
//                 $("input#wallet").val("The Amount is set Default Amount");
//               $('select#id_plan').append('<option value='+sectionObj.var_cod+'>'+sectionObj.name+'</option>');   

//                 function myTrim(x) {
//                   return x.replace(/^\s+|\s+$/gm,'');
//                 }
//                 var str = $("select#id_plan option:selected").text();
//                 $("input#wallet").val(parseFloat(myTrim(str.substr(1, 4))));
//                 $("input#wallet").attr("value", parseFloat(myTrim(str.substr(1, 4))));
//                   });

//             //   $(optionVarsw[i].content).each(function (index,sectionObj) {
//             //     $("input#var_codew").val(sectionObj.varcode).attr("value", sectionObj.varcode);
//             //   $("input#varrpin").attr("value", sectionObj.varrpin);
//             //     $("input#simhost").attr("value", sectionObj.sim);
//             //     $("input#server").val(sectionObj.server).attr("value", sectionObj.server);
//             //     $("input#serviceIDw").val(sectionObj.serviceID).attr("value", sectionObj.serviceID);
          
//             //     });
               
//             }
//          }
//           e.preventDefault();
//     });
 
 
 
 
 
 

  $("form#paymentForm").on("submit", function(e) {
  e.preventDefault();
var select = document.querySelector("select#platforms").selectedIndex;
if(select == 0) {
$.ajax("../../payenv.php", {
    method: "GET",
    dataType: "json",
    contentType: "application/json",
    success: function(response) {
     // console.log(JSON.stringify(response.key));
      var env = response.key;
      let envkey = JSON.stringify(env);
         var networkd = $("select[name='network'] option:selected").text();
              var request_id = $("input[name='request_id']").val();
      var client_id = $("input[name='client_id']").val();
      var swiftType = $("input[name='swiftType']").val();
      var network = $("select[name='network']").val();
      var mobile_number = $("input[name='mobile_number']").val();
      var amount = $("input[name='amount']").val();
      var plan = $("select[name='plan']").val();
      var platforms = $("select[name='platforms']").val();
      var datasubmit = $("input[name='datasubmit']").val();
   
 var r = confirm("Are you sure you want to buy" + " " + networkd + " DATA Plan" + " " + "N" + amount + " " + "to"+ " " +   mobile_number);

  if (r == true) {
   let  handler = PaystackPop.setup({
    key:  `${env}`, // Replace with your public key
    email: document.querySelector("input#email").value,
    amount: document.querySelector("input#wallet").value * 100,
    label: document .querySelector("input#id_mobile_number").value,
    ref: 'ICONSMSData_'+document.querySelector("input#request_id").value, // generates a pseudo-unique reference. Please replace with a reference you generated. Or remove the line entirely so our API will generate one for you
    // label: "Optional string that replaces customer email"
    onClose: function(){
      alert('Payment Tab closed.');
      window.location = window.location.protocol+'//'+window.location.hostname+"/iconsmsdetails/iconsms/data.php"; 
    },
    callback: function(response){
      let message = 'Payment complete! Reference: ' + response.reference;
      alert(message);
      if(typeof(Storage) !== "undefined") {
        sessionStorage.setItem('resp', response.reference);
        sessionStorage.setItem('payment', 'success');
      }
  

       var networkd = $("select[name='network'] option:selected").text();
     var request_id = $("input[name='request_id']").val();
      var client_id = $("input[name='client_id']").val();
      var swiftType = $("input[name='swiftType']").val();
      var network = $("select[name='network']").val();
      var mobile_number = $("input[name='mobile_number']").val();
      var amount = $("input[name='amount']").val();
      var plan = $("select[name='plan']").val();
      var platforms = $("select[name='platforms']").val();
      var datasubmit = $("input[name='datasubmit']").val();
      var csrf_token = $("input[name='csrf-token']").val();
      
      var datass = {
          'request_id' : request_id,
        'client_id' : client_id,
        'swiftType' : swiftType,
        'network' : network,
        'mobile_number' : mobile_number,
        'amount' : amount,
        'plan' : plan,
        'platforms' : platforms,
        'datasubmit' : datasubmit,
        'csrf_token' : csrf_token
        
      }
      //  var dat = JSON.stringify(datas);


      $.ajax('dataprocess.php',  {
          method: 'POST',
          dataType: 'html',
          data : datass,
        //   contentType: "application/json",
          beforeSend: function(){
          $('#process').css("display", "block");
          $('#datasubmit').css("display", "none");

            }, 
            headers: {
      "X-CSRFToken": csrf_token
  },
      
          //contentType: 'application/json',
          success: function(data) {
             // console.log(data);
              var datas =  JSON.parse(data);
         // console.log(datas);
           if(datas.error) {
              alert(datas.error);
               $('#myModal').modal(); 
          } else {
             //var datas = JSON.parse(xhr.responseText);
             var datas = JSON.parse(data);
           // console.log(datas.id);
    $('#ref').text(String(datas.id));
    $('#net').text(String(datas.plan_network));
    $('#plan').text(String(datas.plan_name));
    // $('#amt').text(String(datas.plan_amount));
    $('#status').text(String(datas.Status));
    $('#num').text(String(datas.mobile_number));
    // $('#before').text(String(datas.balance_before));
    // $('#after').text(String(datas.balance_after));
    $('#paid').text(String(datas.plan_amount));



    $('#successModal').modal()
      
          }},
            complete: function(){
        $('#process').css("display", "none");
          $('#datasubmit').css("display", "block");

  },
          error: function(xhr, textStatus, errorThrown) {
            console.log(xhr.status + ' ' + xhr.statusCode + ' ' + xhr.statusText);
             alert("error");
                var parsed_data = JSON.parse(xhr.responseText);
                $('#errmessage').text(String(parsed_data.error))
                $('#myModal').modal();
          }
          
        });
    },
  });
  handler.openIframe();
  }
},
    error: function(xhr) {
        console.error("Error Found");
      }
  
    });
  } else {
  
  var networkd = $("select[name='network'] option:selected").text();
   
     
       var request_id = $("input[name='request_id']").val();
      var client_id = $("input[name='client_id']").val();
      var swiftType = $("input[name='swiftType']").val();
       var network = $("select[name='network']").val();
      var mobile_number = $("input[name='mobile_number']").val();
      var amount = $("input[name='amount']").val();
      var plan = $("select[name='plan']").val();
      var platforms = $("select[name='platforms']").val();
      var datasubmit = $("input[name='datasubmit']").val();
      var csrf_token = $("input[name='csrf-token']").val();
      
      var datass = {
          'request_id' : request_id,
        'client_id' : client_id,
        'swiftType' : swiftType,
        'network' : network,
        'mobile_number' : mobile_number,
        'amount' : amount,
        'plan' : plan,
        'platforms' : platforms,
        'datasubmit' : datasubmit,
        'csrf_token' : csrf_token
        
      }
      
      var datum = {
          'amount' : amount,
          'datasubmit' : datasubmit,
      }
      
      //  var dat = JSON.stringify(datas);

   var r = confirm("Are you sure you want to buy" + " " + networkd + " DATA Plan" + " " + "N" + amount + " " + "to"+ " " +   mobile_number);


  if (r == true) {
       
    var amount = $("input[name='amount']").val();
    var datasubmit = $("input[name='datasubmit']").val();
    var datawal = {
      'amount' : amount,
      'datasubmit' : datasubmit
    }
    $.ajax("walletupp.php", {
      method: "POST",
      data : datawal,
      dataType: 'html',
      headers: {
      "X-CSRFToken": csrf_token
  },
     // async: 'false',
      success: function(data) {
        console.log(data);
        var dat = JSON.parse(data);
        console.log(dat.key);
       // var ky = JSON.stringify(dat.key);
        if(dat.key == "Insufficient Fund") {
          alert("Insufficient Fund. Kindly Fund Your Wallet");
          window.location= window.location.protocol+'//'+window.location.hostname+'/iconsmsdetails/iconsms/dashboard.php?key=' + dat.key;
        }
        else {
      $.ajax('dataprocess.php',  {
          method: 'POST',
          dataType: 'html',
          data : datass,
        //   contentType: "application/json",
          beforeSend: function(){
          $('#process').css("display", "block");
          $('#datasubmit').css("display", "none");

          }, 
            headers: {
      "X-CSRFToken": csrf_token
         },
      
          //contentType: 'application/json',
          success: function(data) {
              console.log(data);
              var datas =  JSON.parse(data);
          console.log(datas);
          if(datas.error) {
              alert(datas.error);
              // $('#myModal').modal(); 
          } else {
             //var datas = JSON.parse(xhr.responseText);
            // var datas = JSON.parse(data);
            console.log(datas.id);
    $('#ref').text(String(datas.id));
    $('#net').text(String(datas.plan_network));
    $('#plan').text(String(datas.plan_name));
    // $('#amt').text(String(datas.plan_amount));
    $('#status').text(String(datas.Status));
    $('#num').text(String(datas.mobile_number));
    // $('#before').text(String(datas.balance_before));
    // $('#after').text(String(datas.balance_after));
    $('#paid').text(String(datas.plan_amount));



    $('#successModal').modal()
    
    var amount = $("input[name='amount']").val();
    var datasubmit = $("input[name='datasubmit']").val();
    var datawal = {
      'amount' : amount,
      'datasubmit' : datasubmit
    }
    $.ajax("walletupdate.php", {
      method: "POST",
      data : datawal,
      dataType: 'html',
      headers: {
      "X-CSRFToken": csrf_token
  },
     // async: 'false',
      success: function(data) {
        //console.log(data);
        var dat = JSON.parse(data);
      //  console.log(dat.key);
       // var ky = JSON.stringify(dat.key);
        if(dat.key == "Insufficient Fund") {
          alert("Insufficient Fund. Kindly Fund Your Wallet");
          window.location= window.location.protocol+'//'+window.location.hostname+'/iconsmsdetails/iconsms/dashboard.php?key=' + dat.key;
        } else {
          if(typeof(Storage) !== "undefined") {
            sessionStorage.setItem('payment', 'success');
            sessionStorage.setItem('responses', 'success');
          }
        }
      
            }
          });
          }},
            complete: function(){
        $('#process').css("display", "none");
          $('#datasubmit').css("display", "block");

  },
          error: function(xhr, textStatus, errorThrown) {
            console.log(xhr.status + ' ' + xhr.statusCode + ' ' + xhr.statusText);
             alert("error");
                var parsed_data = JSON.parse(xhr.responseText);
                $('#errmessage').text(String(parsed_data.error))
                $('#myModal').modal();
          }
          
        });
     }
    }
  });
      }
    }
  
  
        });
      });
 
 
</script>

    <!-- ============================================================== -->
    <!-- end main wrapper  -->
    <!-- ============================================================== -->

    <!-- ============================================================== -->
    <!-- footer -->
    <!-- ============================================================== -->
      <div class="footer" style="margin-top: 20px; position: absolute; bottom: 0; left: 0; right: 0; background-color: rgb(12, 4, 36); color: wheat;">
        <div class="container-fluid">
            <a href='ICONSMSdeveloperAPI.php' style="color: pink; font-size: 17px; font-weight: bold;">DEVELOPER'S API</a>
              <p>   Copyright © 2021 ICONSMS. Designed and Developed by Witt<span style="color: plum;">Stack</span> All rights reserved.</p>
            </div>
        </div>
     <style>
        .float{
	position:fixed;
	width:60px;
	height:60px;
	bottom:20px;
	right:20px;
	background-color:#25d366;
	color:#FFF;
	border-radius:50px;
	text-align:center;
  font-size:30px;
	box-shadow: 1px 2px 2px #999;
  z-index:100;
}

.my-float{
	margin-top:16px;
}
</style>
<a href="https://api.whatsapp.com/send?phone=2348034248420&text=Good%20Day." class="float" target="_blank">
<i class="fab fa-whatsapp my-float"></i>
</a>    </div>
    <!-- ============================================================== -->
    <!-- end footer -->
    <!-- ============================================================== -->
</div>
<!-- ============================================================== -->
<!-- end wrapper  -->
<!-- ============================================================== -->
</div>

    <!-- Optional JavaScript -->
    <!-- jquery 3.3.1 -->
     <script src="https://js.paystack.co/v1/inline.js"></script> 
     <script src="./js/iconsmssdata.js"></script>
    <script src="../../static/assets/vendor/jquery/jquery-3.3.1.min.js"></script>
    <!-- bootstap bundle js -->
    <script src="../../static/assets/vendor/bootstrap/js/bootstrap.bundle.js"></script>
    <!-- slimscroll js -->
    <script src="../../static/assets/vendor/slimscroll/jquery.slimscroll.js"></script>
    <!-- main js -->
    <script src="../../static/assets/libs/js/main-js.js"></script>
    <!-- chart chartist js -->
    <script src="../../static/assets/vendor/charts/chartist-bundle/chartist.min.js"></script>
    <!-- sparkline js -->
    <script src="../../static/assets/vendor/charts/sparkline/jquery.sparkline.js"></script>
    <!-- morris js -->
    <script src="../../static/assets/vendor/charts/morris-bundle/raphael.min.js"></script>
    <script src="../../static/assets/vendor/charts/morris-bundle/morris.js"></script>
    <!-- chart c3 js -->
    <script src="../../static/assets/vendor/charts/c3charts/c3.min.js"></script>
    <script src="../../static/assets/vendor/charts/c3charts/d3-5.4.0.min.js"></script>
    <script src="../../static/assets/vendor/charts/c3charts/C3chartjs.js"></script>
    <script src="../../static/assets/libs/js/dashboard-ecommerce.js"></script>


</body>

</html>